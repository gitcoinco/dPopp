{
  "name": "infra",
  "scripts": {
    "pulumi:up:review": "export ECR_TAG=$(aws ecr describe-images --repository-name passport --query 'max_by(imageDetails, &imagePushedAt).imageTags[0]' --output text | head -n1) && APP_SECRETS=passport-review-secrets APP_ENV=passport-review-env DOCKER_GTC_PASSPORT_IAM_IMAGE=op://DevOps/$APP_SECRETS/ci/ECR_BASE_URL/$ECR_TAG op run --env-file='.env.pulumi' -- pulumi up",
    "pulumi:up:staging": "export ECR_TAG=$(aws ecr describe-images --repository-name passport --query 'max_by(imageDetails, &imagePushedAt).imageTags[0]' --output text | head -n1) && APP_SECRETS=passport-staging-secrets APP_ENV=passport-staging-env DOCKER_GTC_PASSPORT_IAM_IMAGE=op://DevOps/$APP_SECRETS/ci/ECR_BASE_URL/$ECR_TAG op run --env-file='.env.pulumi' -- pulumi up",
    "pulumi:up:prod": "export ECR_TAG=$(aws ecr describe-images --repository-name passport --query 'max_by(imageDetails, &imagePushedAt).imageTags[0]' --output text | head -n1) && APP_SECRETS=passport-prod-secrets APP_ENV=passport-prod-env DOCKER_GTC_PASSPORT_IAM_IMAGE=op://DevOps/$APP_SECRETS/ci/ECR_BASE_URL/$ECR_TAG op run --env-file='.env.pulumi' -- pulumi up"
  },
  "devDependencies": {
    "@types/node": "^14",
    "dotenv-cli": "^7.4.2"
  },
  "dependencies": {
    "@pulumi/aws": "^5.0.0",
    "@pulumi/awsx": "^0.40.0",
    "@pulumi/cloudflare": "^5.26.0",
    "@pulumi/github": "^6.1.0",
    "@pulumi/pulumi": "^3.0.0",
    "@pulumi/std": "^1.6.2"
  }
}
